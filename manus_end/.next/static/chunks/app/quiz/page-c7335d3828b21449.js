(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{7853:(e,t,s)=>{Promise.resolve().then(s.bind(s,1722))},1722:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(2757),a=s(6033),l=s(1496),i=s(2064),n=s(7089),d=s(163),o=s(9911);let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.bL,{className:(0,o.cn)("grid gap-2",s),...a,ref:t})});c.displayName=n.bL.displayName;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.q7,{ref:t,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,r.jsx)(n.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"h-3.5 w-3.5 fill-primary"})})})});u.displayName=n.q7.displayName;var m=s(7282),x=s(3100),h=s(5206),p=s(7986),g=s(5830);let f=a.forwardRef((e,t)=>{let{className:s,value:a,...l}=e;return(0,r.jsx)(g.bL,{ref:t,className:(0,o.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s),...l,children:(0,r.jsx)(g.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});f.displayName=g.bL.displayName;let b=[{id:"adult",name:"Adult"},{id:"pediatric",name:"Pediatric"},{id:"medical",name:"Medical"},{id:"trauma",name:"Trauma"}],w=[10,25,50];function y(){let[e,t]=(0,a.useState)("setup"),[s,n]=(0,a.useState)([]),[d,o]=(0,a.useState)(w[0]),[g,y]=(0,a.useState)([]),[N,v]=(0,a.useState)(0),[j,q]=(0,a.useState)([]),[C,A]=(0,a.useState)(void 0),[S,z]=(0,a.useState)(!1),[k,I]=(0,a.useState)(!1),[R,T]=(0,a.useState)(null),L=e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Q=async()=>{if(0===s.length){T("Please select at least one category.");return}T(null),I(!0),z(!1),A(void 0),console.log("Starting quiz with categories: ".concat(s.join(", ")," and length: ").concat(d));try{let e=await fetch("/api/quiz/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categories:s,length:d})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to generate quiz questions.")}let r=await e.json();y(r.questions),v(0),q([]),t("in-progress")}catch(e){T(e.message||"An unexpected error occurred while fetching questions."),y([])}finally{I(!1)}},P=g[N],_=j.filter(e=>e.isCorrect).length;return k?(0,r.jsx)("div",{className:"p-6 text-center",children:"Loading quiz questions..."}):"setup"===e?(0,r.jsxs)("div",{className:"p-6 space-y-6 max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Quiz Setup"}),R&&(0,r.jsxs)("div",{className:"p-3 bg-red-100 border border-red-300 text-red-700 rounded-md flex items-center text-sm",children:[(0,r.jsx)(x.A,{className:"h-5 w-5 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{children:R})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.J,{className:"text-lg font-semibold text-gray-700 mb-2 block",children:"Select Categories:"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:b.map(e=>(0,r.jsx)(l.$,{variant:s.includes(e.id)?"default":"outline",onClick:()=>L(e.id),className:"w-full ".concat(s.includes(e.id)?"bg-blue-600 hover:bg-blue-700 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:e.name},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.J,{htmlFor:"quizLength",className:"text-lg font-semibold text-gray-700 mb-2 block",children:"Select Quiz Length:"}),(0,r.jsxs)(i.l6,{value:d.toString(),onValueChange:e=>o(parseInt(e)),children:[(0,r.jsx)(i.bq,{id:"quizLength",className:"w-full",children:(0,r.jsx)(i.yv,{})}),(0,r.jsx)(i.gC,{children:w.map(e=>(0,r.jsxs)(i.eb,{value:e.toString(),children:[e," Questions"]},e))})]})]}),(0,r.jsx)(l.$,{onClick:Q,disabled:k||0===s.length,className:"w-full bg-green-600 hover:bg-green-700 text-white text-lg py-3",children:k?"Generating Quiz...":"Start Quiz"})]}):"in-progress"===e&&P?(0,r.jsxs)("div",{className:"p-6 space-y-6 max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["Question ",N+1," of ",g.length]}),(0,r.jsx)(f,{value:(N+1)/g.length*100,className:"w-1/2"})]}),P.scenarioText&&(0,r.jsxs)("div",{className:"p-4 bg-gray-100 rounded-md mb-4",children:[(0,r.jsx)("p",{className:"text-md text-gray-700 font-semibold",children:"Scenario:"}),(0,r.jsx)("p",{className:"text-gray-600 whitespace-pre-line",children:P.scenarioText})]}),(0,r.jsx)("p",{className:"text-lg text-gray-700 font-medium",children:P.questionText}),"multiple-choice"===P.questionType&&P.options&&(0,r.jsx)(c,{value:C,onValueChange:A,className:"space-y-2",children:P.options.map(e=>(0,r.jsxs)(m.J,{htmlFor:e.id,className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-gray-50 transition-colors \n                            ".concat(S&&e.id===P.correctAnswerId?"border-green-500 bg-green-50":""," \n                            ").concat(S&&C===e.id&&e.id!==P.correctAnswerId?"border-red-500 bg-red-50":"border-gray-300"),children:[(0,r.jsx)(u,{value:e.id,id:e.id,className:"mr-3",disabled:S}),(0,r.jsx)("span",{className:"".concat(S&&e.id===P.correctAnswerId?"text-green-700 font-semibold":""," \n                                 ").concat(S&&C===e.id&&e.id!==P.correctAnswerId?"text-red-700 font-semibold":"text-gray-800"),children:e.text}),S&&e.id===P.correctAnswerId&&(0,r.jsx)(h.A,{className:"ml-auto h-5 w-5 text-green-600"}),S&&C===e.id&&e.id!==P.correctAnswerId&&(0,r.jsx)(p.A,{className:"ml-auto h-5 w-5 text-red-600"})]},e.id))}),S&&(0,r.jsxs)("div",{className:"p-4 mt-4 rounded-md bg-blue-50 border border-blue-300",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-blue-700",children:"Explanation:"}),(0,r.jsx)("p",{className:"text-sm text-blue-600 whitespace-pre-line",children:P.explanation})]}),!S&&(0,r.jsx)(l.$,{onClick:()=>{if(!C||!g[N])return;let e=g[N],t=!1;"multiple-choice"===e.questionType&&(t=C===e.correctAnswerId),q(s=>[...s,{questionId:e.id,selectedAnswerId:C,isCorrect:t}]),z(!0)},disabled:!C,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Submit Answer"}),S&&(0,r.jsx)(l.$,{onClick:()=>{A(void 0),z(!1),N<g.length-1?v(e=>e+1):t("completed")},className:"w-full bg-green-600 hover:bg-green-700 text-white",children:N<g.length-1?"Next Question":"View Results"})]}):"completed"===e?(0,r.jsxs)("div",{className:"p-6 space-y-6 max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800",children:"Quiz Completed!"}),(0,r.jsxs)("div",{className:"p-6 bg-gray-100 rounded-lg shadow text-center",children:[(0,r.jsx)("p",{className:"text-xl text-gray-700",children:"Your Score:"}),(0,r.jsxs)("p",{className:"text-4xl font-bold text-blue-600",children:[_," / ",g.length]}),(0,r.jsxs)("p",{className:"text-2xl text-gray-600",children:["(",(_/g.length*100).toFixed(0),"%)"]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mt-6 mb-3",children:"Review Your Answers:"}),(0,r.jsx)("div",{className:"space-y-4",children:g.map((e,t)=>{var s,a,l,i;let n=j.find(t=>t.questionId===e.id),d=null===(a=e.options)||void 0===a?void 0:null===(s=a.find(e=>e.id===(null==n?void 0:n.selectedAnswerId)))||void 0===s?void 0:s.text,o=null===(i=e.options)||void 0===i?void 0:null===(l=i.find(t=>t.id===e.correctAnswerId))||void 0===l?void 0:l.text;return(0,r.jsxs)("div",{className:"p-4 border rounded-md bg-white shadow-sm",children:[(0,r.jsxs)("p",{className:"text-md font-semibold text-gray-800",children:["Q",t+1,": ",e.scenarioText?"".concat(e.scenarioText,"\n").concat(e.questionText):e.questionText]}),(0,r.jsxs)("p",{className:"text-sm ".concat((null==n?void 0:n.isCorrect)?"text-green-600":"text-red-600"),children:["Your answer: ",d||"Not answered"," ",(null==n?void 0:n.isCorrect)?"(Correct)":"(Incorrect)"]}),!(null==n?void 0:n.isCorrect)&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Correct answer: ",o]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1 italic",children:["Explanation: ",e.explanation]})]},e.id)})}),(0,r.jsx)(l.$,{onClick:()=>{t("setup"),n([]),y([]),v(0),q([]),A(void 0),z(!1),T(null)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-lg py-3 mt-6",children:"Take Another Quiz"})]}):(0,r.jsx)("div",{className:"p-6",children:"Something went wrong. Please try setting up a new quiz."})}},1496:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var r=s(2757),a=s(6033),l=s(9394),i=s(9325),n=s(9911);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:o=!1,...c}=e,u=o?l.DX:"button";return(0,r.jsx)(u,{className:(0,n.cn)(d({variant:a,size:i,className:s})),ref:t,...c})});o.displayName="Button"},7282:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(2757),a=s(6033),l=s(1315),i=s(9325),n=s(9911);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.b,{ref:t,className:(0,n.cn)(d(),s),...a})});o.displayName=l.b.displayName},2064:(e,t,s)=>{"use strict";s.d(t,{bq:()=>m,eb:()=>g,gC:()=>p,l6:()=>c,yv:()=>u});var r=s(2757),a=s(6033),l=s(5946),i=s(2825),n=s(3684),d=s(146),o=s(9911);let c=l.bL;l.YJ;let u=l.WT,m=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(l.l9,{ref:t,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[a,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let p=a.forwardRef((e,t)=>{let{className:s,children:a,position:i="popper",...n}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,r.jsx)(x,{}),(0,r.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(h,{})]})})});p.displayName=l.UC.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.JU,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",s),...a})}).displayName=l.JU.displayName;let g=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,r.jsxs)(l.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:a})]})});g.displayName=l.q7.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=l.wv.displayName},9911:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(8181),a=s(5824);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[0,690,623,457,358],()=>t(7853)),_N_E=e.O()}]);